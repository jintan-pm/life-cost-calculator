<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>ä¸€è¾ˆå­è¦èŠ±å¤šå°‘é’±ï¼Ÿï½œè®¡ç®—å™¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      max-width: 520px;
      margin: 32px auto 40px;
      padding: 0 16px;
      line-height: 1.6;
      color: #111;
      background: #fafafa;
    }
    h1 {
      font-size: 22px;
      margin-bottom: 6px;
    }
    p.desc {
      color: #555;
      font-size: 14px;
      margin-top: 0;
    }
    label {
      display: block;
      margin-top: 16px;
      font-weight: 600;
      font-size: 14px;
    }
    .note {
      margin-top: 4px;
      color: #777;
      font-size: 12px;
      line-height: 1.4;
    }
    input[type="number"] {
      width: 100%;
      box-sizing: border-box;
      padding: 9px 11px;
      margin-top: 6px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
      background: #fff;
    }
    input[type="number"]:focus {
      outline: none;
      border-color: #111;
    }
    button {
      margin-top: 22px;
      width: 100%;
      padding: 11px 16px;
      font-size: 15px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #111;
      color: #fff;
    }
    button:hover {
      opacity: 0.9;
    }
    .result-box {
      margin-top: 24px;
      padding: 14px 16px;
      border-radius: 10px;
      background: #f0f0f0;
      font-size: 15px;
    }
    .result-main {
      font-weight: 700;
      font-size: 18px;
      margin-bottom: 6px;
    }
    .result-sub {
      font-size: 13px;
      color: #555;
    }
    .error {
      color: #c00;
      font-size: 13px;
      margin-top: 8px;
    }

    /* ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ– */
    @media (max-width: 480px) {
      body {
        margin: 20px auto 28px;
        padding: 0 14px;
      }
      h1 {
        font-size: 20px;
      }
      p.desc {
        font-size: 13px;
      }
      label {
        font-size: 13px;
        margin-top: 14px;
      }
      input[type="number"] {
        font-size: 13px;
        padding: 9px 10px;
      }
      button {
        font-size: 14px;
        padding: 10px 14px;
      }
      .result-main {
        font-size: 17px;
      }
      .result-sub {
        font-size: 12px;
      }
    }
  </style>
</head>

<body>
  <h1>ä¸€è¾ˆå­è¦èŠ±å¤šå°‘é’±ï¼Ÿ</h1>
  <p class="desc">
    æ•°æ®åªå­˜åœ¨ä½ çš„æµè§ˆå™¨é‡Œï¼Œä¸ä¼šè¢«ä¿å­˜æˆ–ä¸Šä¼ ã€‚åˆ·æ–°é¡µé¢å³å¯é‡ç½®ã€‚
  </p>

  <label>
    ç°åœ¨å¹´é¾„ï¼ˆå²ï¼‰
    <input id="currentAge" type="number" min="0" max="120" placeholder="ä¾‹å¦‚ï¼š30" />
  </label>

  <label>
    é¢„æœŸå¯¿å‘½ï¼ˆå²ï¼‰
    <input id="lifeExpectancy" type="number" min="1" max="120" placeholder="ä¾‹å¦‚ï¼š90" />
  </label>

  <label>
    ç›®å‰å¹³å‡æ¯æœˆèŠ±è´¹ï¼ˆå…ƒï¼‰
    <input id="monthlySpending" type="number" min="0" step="100" placeholder="ä¾‹å¦‚ï¼š8000" />
    <p class="note">
      è¾“å…¥å®é™…èŠ±è´¹ï¼Œæˆ–ä½ è§‰å¾—â€œç”Ÿæ´»è¿˜ä¸é”™â€åº”è¯¥çš„èŠ±è´¹ã€‚å»ºè®®åŒ…å«ä¸€äº›å¹´åº¦æ¶ˆè´¹å¹³å‡åˆ°æœˆçš„æƒ…å†µï¼Œå¦‚æ—…æ¸¸ç­‰ã€‚
    </p>
  </label>

  <label>
    é€šè´§è†¨èƒ€ç‡ï¼ˆ%ï¼‰
    <input id="inflation" type="number" min="0" step="0.1" value="2" />
    <p class="note">
      ç›´æ¥è¾“å…¥æ•°å­—ï¼ˆæ— éœ€ç™¾åˆ†å·ï¼‰ï¼›å‚è€ƒï¼šè‡ª2000å¹´ï¼Œä¸­å›½å¹³å‡2.02%ï¼Œæ—¥æœ¬0.41%ï¼Œç¾å›½2.58%
    </p>
  </label>

  <button id="calcBtn" type="button">å¸®æˆ‘ç®—ä¸€ä¸‹ä¸€è¾ˆå­è¦èŠ±å¤šå°‘é’±</button>

  <div id="error" class="error"></div>

  <div id="result" class="result-box" style="display: none;">
    <div class="result-main" id="resultMain"></div>
    <div class="result-sub" id="resultSub"></div>
  </div>

  <script>
    function formatNumber(n) {
      return n.toLocaleString("zh-CN", { maximumFractionDigits: 0 });
    }

    document.getElementById("calcBtn").addEventListener("click", function () {
      const currentAge = Number(document.getElementById("currentAge").value);
      const lifeExpectancy = Number(document.getElementById("lifeExpectancy").value);
      const monthlySpending = Number(document.getElementById("monthlySpending").value);

      const inflationInput = document.getElementById("inflation").value;
      const inflation = inflationInput === "" ? 0 : Number(inflationInput) / 100;

      const errorEl = document.getElementById("error");
      const resultBox = document.getElementById("result");
      const resultMain = document.getElementById("resultMain");
      const resultSub = document.getElementById("resultSub");

      errorEl.textContent = "";
      resultBox.style.display = "none";

      if (
        !currentAge ||
        !lifeExpectancy ||
        !monthlySpending ||
        currentAge < 0 ||
        lifeExpectancy <= currentAge ||
        monthlySpending < 0
      ) {
        errorEl.textContent = "è¯·æ£€æŸ¥è¾“å…¥ï¼šå¹´é¾„è¦åˆç†ï¼Œé¢„æœŸå¯¿å‘½éœ€å¤§äºå½“å‰å¹´é¾„ï¼ŒæœˆèŠ±è´¹éœ€å¤§äºç­‰äº 0ã€‚";
        return;
      }

      if (inflation < 0) {
        errorEl.textContent = "è¯·æ£€æŸ¥é€šè´§è†¨èƒ€ç‡ï¼šè¯·è¾“å…¥å¤§äºç­‰äº 0 çš„æ•°å­—ã€‚";
        return;
      }

      const yearsLeft = lifeExpectancy - currentAge; // ä»â€œæ˜å¹´â€å¼€å§‹ç®—å¤šå°‘å¹´
      let total = 0;

      // ç¬¬ä¸€å¹´ï¼šä»â€œæ˜å¹´â€å¼€å§‹ â†’ å…ˆä¹˜ä¸€æ¬¡ (1 + inflation)
      let yearlySpending = monthlySpending * 12 * (1 + inflation);

      for (let i = 0; i < yearsLeft; i++) {
        total += yearlySpending;
        yearlySpending *= (1 + inflation);
      }

      resultMain.textContent =
        "æŒ‰ä½ çš„è¾“å…¥ä¼°ç®—ï¼Œè¿™ä¸€è¾ˆå­å¤§æ¦‚éœ€è¦èŠ±è´¹ " + formatNumber(total) + " å…ƒã€‚";

      resultSub.textContent =
        "ä»ä½ ä¸‹ä¸€å¹´å¼€å§‹åˆ°çº¦ " +
        lifeExpectancy +
        " å²ï¼Œå‡è®¾å½“å‰æ¯æœˆèŠ±è´¹çº¦ " +
        formatNumber(monthlySpending) +
        " å…ƒï¼Œæœªæ¥æ¯å¹´æŒ‰é€šè´§è†¨èƒ€ç‡çº¦ " +
        (inflation * 100).toFixed(1) +
        "% å¢é•¿ã€‚";

      resultBox.style.display = "block";
    });
  </script>
</body>
</html>
